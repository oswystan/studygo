# SRS

## 聊天客户端
- 登陆：*login $username $passwd* 用户名＋密码，登陆后显示上次登录时间
- 查看联系人状态：*list* 显示
- 单聊：*talkto $user* 要求单聊的对端处于在线状态
	- 发送消息（不需要输入任何命令） 
	- 显示对端消息(**最好是可以在另外一个窗口中显示聊天的历史消息**）
	- 退出当前聊天（输入*control+d*）
- 修改用户信息：密码，昵称
- 显示历史信息：*history [$user]* 可以显示和指定用户的交流记录或者所有人的历史纪录，按时间倒序显示
- 显示未读信息：*unread [$user]* 可以显示指定用户的未读信息或者所有未读信息，按时间倒序显示

## WEB管理页面
- 管理员身份登录：用户名和密码，非管理员身份登录报错（在安装时默认创建一个admin/admin的管理员用户）
- 查看用户列表
	- 分页显示用户信息：用户名，昵称，密码（MD5/SHA1），在线状态，上次登录时间
	- 修改单个用户信息：密码，昵称
	- 删除用户：只是设置用户状态为不可用，不删除用户数据和聊天数据
	- 退出登录
	- 超时机制
- 查看服务器状态
	- 当前连接数
	- 总服务启动时长
	- 消息处理总数，单位时间处理消息数


## 服务器后台管理
- 定时任务：
	- 归档用户消息到归档库中
	- 按时间归档，每周归档一个新的数据表，每月一个数据库

# 技术难点分析
- 客户端与服务端的消息打包格式
	- **protocol buffer**
	- jason
- Mysql数据库连接（Go方式以及建库sql脚本）
- MD5/SHA1数据加密方式
- 消息处理机制
	- 消息打包
	- 消息解析
	- 消息发送
	- 消息排队
	- 消息循环
- 数据库连接管理
- RESTful API方式访问服务器
	- **httprouter**
	- 路由定义
- **客户端工具的消息的分区域显示问题**

